<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="target-densityDpi=device-dpi, width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
        <!-- Bootstrap -->
    	<link href="../css/bootstrap.min.css" rel="stylesheet" media="screen">
    	<link href="../plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" media="screen">
    	<link rel="stylesheet" type="text/css" href="../css/index.css" />
    	<link rel="stylesheet" type="text/css" href="../css/style.css" />
		
        <title>Connecxion </title>
    </head>
	<style>
div.formulaire{
margin-top: 10em;
background-color: rgb(250, 250, 248);
padding: 1em;

}
button.btFacebook{
 
margin-top: 3em;
font-weight: bold;
color: white;
background-color: blue;
padding: 2em;
}
	</style>
    <body>
    	<div id="header">
		  <div>
	              <a class="dropdown-toggle" id="header-titre" role="button" data-toggle="dropdown" href="#"><img src="../img/logo3_small.png"></a>
		  </div>
		  
        </div>
        <div id="container-add"><button type="submit" class="btFacebook btn  btn-primary" onclick="login()">Facebook Connect</button></div>
		 <div id="container-add">
		<div class="formulaire">
			<legend></legend>
				<form method="post" action="">
				
				<input class="test" type="Email" id="email" name="email" placeholder="email "/>
				
				<td><input class="test" type="password" id="password" name="password" placeholder="mot de passe "/>
				
				
				<div>
				<button class="btn "  type="submit" id="saisirButton" name="saisirButton" style="color: black;padding: 0.5em;">connexion</button>
				</div> 
           <div >
           
           </div>
		</div>
		</div>
       
        
        
        <!-- <script type="text/javascript" src="../cordova-2.7.0.js"></script> -->
			<!-- cordova -->
			 <script type="text/javascript" src="../js/cordova-2.5.0.js"></script>
		 <!-- cordova facebook plugin -->
		<script src="../js/cdv-plugin-fb-connect.js"></script>
	    <!-- facebook js sdk -->
		<script src="../js/facebook-js-sdk.js"></script>
        <script type="text/javascript" src="../js/jquery.js"></script>
        <script type="text/javascript" src="../js/bootstrap-dropdown.js"></script>
        <script>
            
            if ((typeof cordova == 'undefined') && (typeof Cordova == 'undefined')) alert('Cordova variable does not exist. Check that you have included cordova.js correctly');
            if (typeof CDV == 'undefined') alert('CDV variable does not exist. Check that you have included cdv-plugin-fb-connect.js correctly');
            if (typeof FB == 'undefined') alert('FB variable does not exist. Check that you have included the Facebook JS SDK file.');
            
            FB.Event.subscribe('auth.login', function(response) {
                               alert('auth.login event');
                               });
            
            FB.Event.subscribe('auth.logout', function(response) {
                               alert('auth.logout event');
                               });
            
            FB.Event.subscribe('auth.sessionChange', function(response) {
                               alert('auth.sessionChange event');
                               });
            
            FB.Event.subscribe('auth.statusChange', function(response) {
                               alert('auth.statusChange event');
                               });
            
            /*function getSession() {
                alert("session: " + JSON.stringify(FB.getSession()));
            }
            */
            function getLoginStatus() {
                FB.getLoginStatus(function(response) {
                                  if (response.status == 'connected') {
                                  alert('logged in');
                                  } else {
                                  alert('not logged in');
                                  }
                                  });
            }
            var friendIDs = [];
			var fdata;
            function me() {
                FB.api('/me/friends', { fields: 'id, name, picture' },  function(response) {
                       if (response.error) {
                       alert(JSON.stringify(response.error));
                       } else {
                       var data = document.getElementById('data');
					   fdata=response.data;
					   console.log("fdata: "+fdata);
                       response.data.forEach(function(item) {
                                             var d = document.createElement('div');
                                             d.innerHTML = "<img src="+item.picture+"/>"+item.name;
                                             data.appendChild(d);
                                             });
                       }
					var friends = response.data;
					console.log(friends.length); 
					for (var k = 0; k < friends.length && k < 200; k++) {
				        var friend = friends[k];
				        var index = 1;

				        friendIDs[k] = friend.id;
				        //friendsInfo[k] = friend;
					}
					console.log("friendId's: "+friendIDs);
                       });
            }
            
            function logout() {
                FB.logout(function(response) {
                          alert('logged out');
                          });
            }
            
            function login() {
                FB.login(
                         function(response) {
                         if (response.session) {
                         alert('logged in');
                         } else {
                         alert('not logged in');
                         }
                         },
                         { scope: "email" }
                         );
            }
			
			
			function facebookWallPost() {
			    console.log('Debug 1');
				var params = {
				    method: 'feed',
				    name: 'Facebook Dialogs',
				    link: 'https://developers.facebook.com/docs/reference/dialogs/',
				    picture: 'http://fbrell.com/f8.jpg',
				    caption: 'Reference Documentation',
				    description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
				  };
				console.log(params);
			    FB.ui(params, function(obj) { console.log(obj);});
			}
            
			function publishStoryFriend() {
				randNum = Math.floor ( Math.random() * friendIDs.length ); 

				var friendID = friendIDs[randNum];
				if (friendID == undefined){
					alert('please click the me button to get a list of friends first');
				}else{
			    	console.log("friend id: " + friendID );
			        console.log('Opening a dialog for friendID: ', friendID);
			        var params = {
			        	method: 'feed',
			            to: friendID.toString(),
			            name: 'Facebook Dialogs',
			            link: 'https://developers.facebook.com/docs/reference/dialogs/',
			            picture: 'http://fbrell.com/f8.jpg',
			            caption: 'Reference Documentation',
			            description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
			     	};
					FB.ui(params, function(obj) { console.log(obj);});
			    }
			}
            
            document.addEventListener('deviceready', function() {
                                      try {
                                      //alert('Device is ready! Make sure you set your app_id below this alert.');
                                      FB.init({ appId: "373488886099532", nativeInterface: CDV.FB, useCachedDialogs: false });
                                      //document.getElementById('data').innerHTML = "";
                                      } catch (e) {
                                      alert(e);
                                      }
                 }, false);
            </script>
		
    </body>
</html>
